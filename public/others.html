<!doctype html>
<html lang="en">
    
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
        <title>Colla|3Edit</title>
        <link rel="stylesheet" href="/css/normalize.css">
        <link rel="stylesheet" href="/css/main.css">
        <img id="logo" src="/images/logo4.jpg" alt="CE">
    </head>
    
    <body>
        <span class="login"><button onclick="location.href = 'login.html';" class = "button">Login</button></span>
        <br/>
        <header>
            <nav>
                <ul>
                    <li><a href="home.html">Home</a></li>
                    <li class = "active"><a href="#">Info</a></li>
                    <li><a href="/editor">Editor</a></li>
                </ul>
            </nav>
        </header>
        <div id="main">
           
        </div>
        <br/>
        <center>
            <h2>INFO</h2>
            <br/>
            <p>We use the latest technologies to give u seamless ability to edit and collaborate while writing code. No more is coding a boring single person job. <br/> Invite over all your friends and type away simultaneously and we'll take care about putting it all together !</p>
            <br/><br/>
            <p>We now have support for over <b>250 languages</b><br/>Check now if we support YOUR Favourite Language : </p> 
            <input type="text" list="languages" id="input">
            <datalist id="languages">
                
            </datalist>
            <br/>
        </center>
        <br/><br/>
        <footer>
            <p>Colla|3Edit. <br/> TM All rights reserved</p>
            <div id="footer_links">
                    <ul>
                        <li><a href="#">Contact Us</a></li>
                        <li><a href="#">Terms and Conditions</a></li>
                    </ul>
            </div>
        </footer>

        <script type="text/javascript">
            
            document.addEventListener('DOMContentLoaded', function() {
                var xhr = new XMLHttpRequest();
                var list = document.querySelector("#languages");
                var input = document.querySelector("#input");
                input.addEventListener('keyup', listener);
                

                function listener() {

                    console.log("Called" + input.value);
                    input.removeEventListener('keypress', listener);
                    xhr.open('get', `/list?v=${input.value}&l=${input.value.length}`, true); 
                    xhr.onreadystatechange = function() {
                        if(xhr.readyState === 4 && xhr.status === 200) {
                            list.innerHTML = "";
                            console.log("Res");
                            var content = JSON.parse(xhr.responseText);
                            content.forEach(function(lang) {
                                var option = document.createElement("option");
                                list.innerHTML += `<option value="${lang}">`;
                            });
                        }
                    }
                    xhr.send();    
                };
            });
        </script>

    </body>

</html>
